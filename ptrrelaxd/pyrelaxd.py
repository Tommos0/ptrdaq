import _pyrelaxd #@UnresolvedImport

MPIXD_ERR_NONE          = 0x0000  # No error, all okay
MPIXD_ERR_ILLEGAL       = 0x0001  # Illegal message type
MPIXD_ERR_LENGTH        = 0x0002  # Incorrect message length
MPIXD_ERR_OFFSET        = 0x0004  # Incorrect address offset
MPIXD_ERR_ROW           = 0x0008  # Incorrect row number sequence
MPIXD_ERR_BUS           = 0x0010  # Wishbone bus error
MPIXD_ERR_CONNECT       = 0x0020  # Medipix2 chip unconnected error
MPIXD_ERR_WATCHDOG      = 0x0040  # Medipix2 controller watchdog error
MPIXD_ERR_FATAL         = 0x0080  # Medipix2 controller fatal error
MPIXD_ERR_TRIGGER       = 0x0100  # Medipix2 external trigger
MPIXD_ERR_TIMEOUT       = 0x2000  # Timed out
MPIXD_ERR_INTERRUPT     = 0x4000  # Interrupted
MPIXD_ERR_UNKNOWN       = 0x8000  # Unknown error

MXR_IKRUM     = 0
MXR_DISC      = 1
MXR_PREAMP    = 2
MXR_BUFFA     = 3
MXR_BUFFB     = 4
MXR_DELAYN    = 5
MXR_THLFINE   = 6
MXR_THLCOARSE = 7
MXR_THHFINE   = 8
MXR_THHCOARSE = 9   
MXR_FBK       = 10
MXR_GND       = 11
MXR_THS       = 12
MXR_BIASLVDS  = 13
MXR_REFLVDS   = 14

TPX_IKRUM     = 0
TPX_DISC      = 1
TPX_PREAMP    = 2
TPX_BUFFA     = 3
TPX_BUFFB     = 4
TPX_HIST      = 5
TPX_THLFINE   = 6
TPX_THLCOARSE = 7
TPX_VCAS      = 8
TPX_FBK       = 9
TPX_GND       = 10
TPX_THS       = 11
TPX_BIASLVDS  = 12
TPX_REFLVDS   = 13

MXR_CFG8_MASK                = 0x01
MXR_CFG8_TEST                = 0x02
MXR_CFG8_LO_THR_MASK         = 0x1C
MXR_CFG8_HI_THR_MASK         = 0xE0
MXR_CFG8_MASK_SHIFT          = 0
MXR_CFG8_TEST_SHIFT          = 1
MXR_CFG8_LO_THR_MASK_SHIFT   = 2
MXR_CFG8_HI_THR_MASK_SHIFT   = 5

TPX_CFG8_MASK                = 0x01
TPX_CFG8_TEST                = 0x02
TPX_CFG8_THRADJ_MASK         = 0x3C
TPX_CFG8_MODE_MASK           = 0xC0
TPX_CFG8_MASK_SHIFT          = 0
TPX_CFG8_TEST_SHIFT          = 1
TPX_CFG8_THRADJ_MASK_SHIFT   = 2
TPX_CFG8_MODE_MASK_SHIFT     = 6

TPX_DEFAULTS = [ 5, 127, 255, 127, 127, 0, 447, 7, 130, 128, 80, 85, 128, 128 ]
MXR_DEFAULTS = [ 20, 127, 255, 127, 127, 0, 447, 7, 0, 0, 128, 80, 85, 128, 128 ]

MPX_MXR = 2
MPX_TPX = 3

MPIX2_DATAXMT_REG_OFFSET   = 0x00
MPIX2_DATARCV_REG_OFFSET   = 0x04
MPIX2_STATUS_REG_OFFSET    = 0x08
MPIX2_CONF_REG_OFFSET      = 0x0C
MPIX2_TIMER_REG_OFFSET     = 0x10
MPIX2_ANIN_REG_OFFSET      = 0x14


MPIX2_STATUS_MPIX_IDLE     = 0x0001
MPIX2_STATUS_MPIX_BUSY     = 0x0002
MPIX2_STATUS_XMT_READY     = 0x0004
MPIX2_STATUS_RCV_READY     = 0x0008
MPIX2_STATUS_DATARCV_READY = 0x0010
MPIX2_STATUS_SHUTTER_READY   = 0x0020
MPIX2_STATUS_BURST_READY_INT = 0x0040
MPIX2_STATUS_BUS_ERR_INT     = 0x0080
MPIX2_STATUS_CONNECT_ERR_INT   = 0x0100
MPIX2_STATUS_WATCHDOG_ERR_INT   = 0x0200
MPIX2_STATUS_FATAL_ERR_INT   = 0x0400
MPIX2_STATUS_EXT_TRIG_INT   = 0x0800


MPIX2_CONF_START   = 0x00001
MPIX2_CONF_MODE_MASK   = 0x00006
MPIX2_CONF_MODE_READOUT   = 0x00000
MPIX2_CONF_MODE_SET_MATRIX   = 0x00002
MPIX2_CONF_MODE_SET_DAC   = 0x00004
MPIX2_CONF_POLARITY   = 0x00008
MPIX2_CONF_SPARE_FSR   = 0x00010
MPIX2_CONF_ENABLE_TPULSE   = 0x00020
MPIX2_CONF_ENABLE_CST   = 0x00040
MPIX2_CONF_P_S   = 0x00080
MPIX2_CONF_SHUTTER_CLOSED   = 0x00100
MPIX2_CONF_TIMER_USED   = 0x00200
MPIX2_CONF_RESET_MPIX   = 0x00400
MPIX2_CONF_BURST_READOUT   = 0x00800
MPIX2_CONF_CHIP_ALL   = 0x01000
MPIX2_CONF_CHIP_SEL_MASK   = 0x06000
MPIX2_CONF_CHIP_SEL_SHIFT   = 13
MPIX2_CONF_EXT_TRIG_ENABLE   = 0x08000
MPIX2_CONF_EXT_TRIG_FALLING_EDGE   = 0x10000
MPIX2_CONF_EXT_TRIG_INHIBIT   = 0x20000
MPIX2_CONF_TPX_CLOCK_MASK   = 0x001C0000



MpxModule = _pyrelaxd.PyMpxModule

